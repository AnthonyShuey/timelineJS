<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Media Carousel for TimelineJS</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .carousel-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 80%;
            max-width: 800px;
            margin: auto;
        }
        .carousel-slide {
            display: flex;
            overflow: hidden;
            width: 100%;
        }
        .carousel-slide div {
            min-width: 100%;
            transition: 0.5s ease-in-out;
            text-align: center;
        }
        img, video, audio {
            max-width: 100%;
            max-height: 400px;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
    </style>
</head>
<body>

<h1>Dynamic Media Carousel</h1>

<!-- Carousel Section -->
<div class="carousel-container" id="carousel-container" style="display: none;">
    <div class="carousel-slide" id="carousel-slide"></div>
</div>

<div class="controls" id="carousel-controls" style="display: none;">
    <button onclick="moveSlide(-1)">❮ Previous</button>
    <button onclick="moveSlide(1)">Next ❯</button>
</div>

<script>
    let mediaArray = [
        "https://example.com/image1.jpg",  // Media 1
        "https://example.com/audio1.mp3",  // Media 2
        "https://example.com/video1.mp4",  // Media 3
        "https://example.com/image2.jpg",  // Media 4
        "https://example.com/audio2.mp3",  // Media 5
        "https://example.com/video2.mp4",  // Media 6
        "https://example.com/image3.jpg",  // Media 7
        "https://example.com/audio3.mp3",  // Media 8
        // Add more media URLs here
    ];

    let currentSlide = 0;

    // Function to get URL query parameters
    function getQueryParams() {
        const urlParams = new URLSearchParams(window.location.search);
        const mediaParam = urlParams.get('media');
        return mediaParam ? mediaParam.split(',').map(num => parseInt(num.trim()) - 1) : [];
    }

    // Function to create a carousel based on selected media numbers
    function createCarousel() {
        const selectedMedia = getQueryParams();
        const carouselSlide = document.getElementById('carousel-slide');
        carouselSlide.innerHTML = '';  // Clear existing carousel

        if (selectedMedia.length === 0) {
            alert('No media selected! Please provide media numbers in the URL.');
            return;
        }

        selectedMedia.forEach(index => {
            if (mediaArray[index]) {
                const mediaDiv = document.createElement('div');
                const mediaUrl = mediaArray[index];
                
                if (mediaUrl.endsWith('.jpg') || mediaUrl.endsWith('.png') || mediaUrl.endsWith('.jpeg')) {
                    mediaDiv.innerHTML = `<img src="${mediaUrl}" alt="Media Image">`;
                } else if (mediaUrl.endsWith('.mp3') || mediaUrl.endsWith('.wav')) {
                    mediaDiv.innerHTML = `<audio controls><source src="${mediaUrl}" type="audio/mpeg"></audio>`;
                } else if (mediaUrl.endsWith('.mp4') || mediaUrl.endsWith('.webm')) {
                    mediaDiv.innerHTML = `<video controls><source src="${mediaUrl}" type="video/mp4"></video>`;
                }
                carouselSlide.appendChild(mediaDiv);
            }
        });

        document.getElementById('carousel-container').style.display = 'flex';
        document.getElementById('carousel-controls').style.display = 'flex';
        currentSlide = 0;
        updateSlidePosition();
    }

    // Function to move the carousel
    function moveSlide(direction) {
        const totalSlides = document.querySelectorAll('.carousel-slide div').length;
        currentSlide += direction;
        if (currentSlide >= totalSlides) {
            currentSlide = 0;
        } else if (currentSlide < 0) {
            currentSlide = totalSlides - 1;
        }
        updateSlidePosition();
    }

    // Function to update the carousel position
    function updateSlidePosition() {
        const slideWidth = document.querySelector('.carousel-slide div').clientWidth;
        document.querySelector('.carousel-slide').style.transform = `translateX(${-slideWidth * currentSlide}px)`;
    }

    // Initialize carousel when the page loads
    window.onload = createCarousel;
</script>

</body>
</html>

